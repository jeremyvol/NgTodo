<div class="center-me" style="width:90%">
  <table mat-table [dataSource]="dataSource" matSort matSortActive="status" matSortDirection="desc" class="mat-elevation-z8">

    <!-- Checkbox Column -->
    <ng-container matColumnDef="select">
      <th mat-header-cell *matHeaderCellDef></th>
      <td mat-cell *matCellDef="let element">
        <mat-checkbox color="primary" (click)="$event.stopPropagation()" (change)="onCheckboxChange($event,element)"
          [checked]="element.status==='Done'?true:false">
        </mat-checkbox>
      </td>
    </ng-container>

    <!-- Title Column -->
    <ng-container matColumnDef="title">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Title </th>
      <td mat-cell *matCellDef="let element" [ngClass]="element.status==='Done'?'crossed-text':''"> {{element.title}}
      </td>
    </ng-container>

    <!-- Status Column -->
    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Status </th>
      <td mat-cell *matCellDef="let element" [ngClass]="element.status==='Done'?'crossed-text':''">
        {{element.status}}
      </td>
    </ng-container>

    <!-- Creation Date Column -->
    <ng-container matColumnDef="creationDate">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Creation Date </th>
      <td mat-cell *matCellDef="let element" [ngClass]="element.status==='Done'?'crossed-text':''">
        {{element.creationDate|date:"dd/MM/yyyy"}} </td>
    </ng-container>

    <!-- Due Date Column -->
    <ng-container matColumnDef="dueDate">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Due Date </th>
      <td mat-cell *matCellDef="let element" [ngClass]="element.status==='Done'?'crossed-text':''">
        {{element.dueDate|date:"dd/MM/yyyy"}} </td>
    </ng-container>

    <!-- Read Column -->
    <ng-container matColumnDef="read">
      <th mat-header-cell *matHeaderCellDef></th>
      <td mat-cell *matCellDef="let element">
        <a mat-icon-button routerLink="/todo/{{element.id}}" color='primary'>
          <mat-icon title="View details">visibility</mat-icon>
        </a>
      </td>
    </ng-container>

    <!-- Edit Column -->
    <ng-container matColumnDef="edit">
      <th mat-header-cell *matHeaderCellDef></th>
      <td mat-cell *matCellDef="let element">
        <a mat-icon-button routerLink="/todo/edit/{{element.id}}" color='primary'>
          <mat-icon title="Edit">edit</mat-icon>
        </a>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;" [ngClass]="{'highlight': selectedRowIndex == row.id}"
      (mouseenter)="highlight(row)" (mouseleave)="selectedRowIndex = -1"></tr>
  </table>
  <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>

</div>
